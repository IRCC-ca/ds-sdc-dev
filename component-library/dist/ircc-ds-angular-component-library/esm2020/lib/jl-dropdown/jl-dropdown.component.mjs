// TODO: Cannot enter dropdown menu with keyboard!!!
import { Component, HostListener, Input, } from '@angular/core';
import { NG_VALIDATORS, NG_VALUE_ACCESSOR } from '@angular/forms';
import { DropdownTypes } from '../../shared/constants/jl-components/jl-components.constants/jl-components.constants';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "@ngx-translate/core";
export class JLDropdownComponent {
    constructor(differs) {
        this.differs = differs;
        this.hideDropdown = true;
        this.isFocusInsideComponent = false;
        this.isComponentClicked = false;
        this.dropdownTypes = DropdownTypes;
        this.touched = false;
        this.isDisabled = false;
        this.onChange = (value) => { };
        this.onTouched = () => { };
    }
    validate(control) {
        return control.errors;
    }
    writeValue(value) {
        //TODO: This needs to be written to set the value and the current index number;
    }
    registerOnChange(onChange) {
        this.onChange = onChange;
    }
    registerOnTouched(onTouched) {
        this.onTouched = onTouched;
    }
    setDisabledState(isDisabled) {
        // (this.config !== undefined) ? this.config.disabled = isDisabled : this.disabled = isDisabled;
        this.isDisabled = isDisabled;
    }
    markAsTouched() {
        if (!this.touched) {
            this.onTouched();
            this.touched = true;
        }
    }
    handleKeyDown(event) {
        event.stopPropagation();
        if (this.hideDropdown === false || (this.config?.options || []).length > 0) {
            this.isComponentClicked = false;
            this.isFocusInsideComponent = false;
            this.hideDropdown = true;
        }
    }
    clickInside(event) {
        const target = event.target;
        if (this.hideDropdown === true && target.classList.contains(`selected`)) {
            this.isFocusInsideComponent = true;
            this.isComponentClicked = true;
            this.hideDropdown = false;
        }
        else if (target.classList.contains('select-target') ||
            target.classList.contains(`selected`)) {
            this.isComponentClicked = false;
            this.isFocusInsideComponent = false;
            this.hideDropdown = true;
        }
    }
    clickout() {
        if (!this.isFocusInsideComponent && this.isComponentClicked) {
            this.toggleDropDown();
            this.isComponentClicked = false;
        }
        this.isFocusInsideComponent = false;
    }
    toggleDropDown() {
        this.hideDropdown = !this.hideDropdown;
    }
    toggleDropDownKey(event) {
        if (event.keyCode === 13) { //TODO: Changed until const can be added.
            // if (event.key === KeyboardEvents.enter) {
            this.toggleDropDown();
        }
    }
    /**
     * TODO: I've band-aided this one so that it works. Can probably remove the entire
     * custom DoCheck by just doing this.
     * @param index
     */
    selectIndex(index) {
        if (this.config) {
            let emit = false;
            if (this.config.selectedIndex !== index) {
                emit = true;
            }
            this.config.selectedIndex = index;
            emit ? this.onChange(this.config?.options[(this.config?.selectedIndex || 0)].value || '') : '';
            // emit ? this.valueChange.emit({ id: this.config?.id || '', value: this.config?.options[(this.config?.selectedIndex || 0)].value || '' }) : '';
        }
    }
    getOptions(index) {
        if (this.config) {
            return this.config.options[index].text;
        }
        return '';
    }
    ngOnInit() { }
}
JLDropdownComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "14.1.3", ngImport: i0, type: JLDropdownComponent, deps: [{ token: i0.KeyValueDiffers }], target: i0.ɵɵFactoryTarget.Component });
JLDropdownComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "14.1.3", type: JLDropdownComponent, selector: "jl-pr-sclp-dropdown", inputs: { config: "config", options: "options", id: "id", type: "type", text: "text", large: "large", error: "error", selectedIndex: "selectedIndex" }, host: { listeners: { "window:keydown.escape": "handleKeyDown($event)", "click": "clickInside($event)", "document:click": "clickout()" } }, providers: [
        {
            provide: NG_VALUE_ACCESSOR,
            multi: true,
            useExisting: JLDropdownComponent
        },
        {
            provide: NG_VALIDATORS,
            multi: true,
            useExisting: JLDropdownComponent
        }
    ], ngImport: i0, template: "<ng-container *ngIf=\"(config?.options || options || []).length > 0; then notEmpty; else isEmpty\">\n  <!-- an *ngIf may be better here, since there are only two cases -->\n</ng-container>\n<ng-template #notEmpty>\n  <div class=\"select-container\" [ngClass]=\"{ large: config?.large || large, error: config?.error || error }\">\n    <div\n      class=\"select\"\n      [ngClass]=\"!hideDropdown ? 'open' : ''\"\n      [class]=\"(config?.type || type || dropdownTypes.input)\"\n    >\n      <div\n        tabindex=\"0\"\n        class=\"selected input\"\n        (keyup)=\"toggleDropDownKey($event)\"\n        [ngClass]=\"!hideDropdown ? 'active' : ''\"\n        *ngIf=\"(config?.type === dropdownTypes.input) || (type === dropdownTypes.input)\"\n      >\n        {{ getOptions(config?.selectedIndex || selectedIndex || 0) | translate }}\n      </div>\n\n      <div\n        tabindex=\"0\"\n        class=\"selected cta\"\n        (keyup)=\"toggleDropDownKey($event)\"\n        [ngClass]=\"!hideDropdown ? 'active' : ''\"\n        *ngIf=\"(config?.type === dropdownTypes.cta) || (type === dropdownTypes.cta)\"\n      >\n        {{ (config?.text || text || '') | translate }}\n      </div>\n\n      <div\n        class=\"select-options\"\n        [ngClass]=\"!hideDropdown ? '' : 'hide'\"\n      >\n        <div\n          *ngFor=\"let option of config?.options || options; let index = index\" \n          class=\"option select-target\"\n          (click)=\"selectIndex(index)\"\n          [tabindex]=\"index + 1\"\n          [ngClass]=\"{ active: index === (config?.selectedIndex || selectedIndex || 0), hide: (config?.type === dropdownTypes.cta) || (type === dropdownTypes.cta) }\"\n        > \n        <!-- TODO: Check if the above line defaults to 0 if the selectedIndex is undefined, or if it also triggers if 0 -->\n          <p class=\"select-target\">{{ option.text | translate }}</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</ng-template>\n\n<ng-template #isEmpty>\n  <div\n    class=\"select-container empty\"\n    [ngClass]=\"{ large: config?.large || large, error: config?.error || error }\"\n  >\n    <div class=\"select\">\n      <div tabindex=\"0\" class=\"selected\">&#160;</div>\n    </div>\n  </div>\n</ng-template>\n", styles: [".gray-bg{background:#f5f5f5}.dark-gray-bg{background:#d9d9d9}.select-container{-webkit-user-select:none;user-select:none}.select-container .select{height:40px;min-width:15ch;max-width:30ch;justify-self:stretch;display:grid;grid-template-areas:\"select\";align-items:center;width:100%}.select-container .select:after{content:\"\\f282\";color:#161617;font-family:bootstrap-icons!important;grid-area:select;justify-self:end;margin-right:14px;height:16px;width:14px;line-height:initial;pointer-events:none;transition:all .1s}.select-container .selected{-webkit-appearance:none;appearance:none;background-color:transparent;border:none;margin:0;font-family:inherit;font-size:inherit;cursor:inherit;line-height:inherit;padding:10px 30px 10px 12px;cursor:pointer;grid-area:select}@keyframes active{0%{background-color:#59595a1f}99%{background-color:#59595a1f}to{background-color:transparent}}.select-container .selected:hover{background-color:#59595a0f}.select-container .selected:focus-visible{outline:solid 3px hsl(225deg,90%,62%)}.select-container .selected.active{background-color:transparent;animation-name:active;animation-duration:2s}.select-container .selected,.select-container .select-options{background:#ffffff;font-size:14px;line-height:20px;color:#161617;font-family:Inter,sans-serif!important;border-radius:4px;border:1px solid #b2b2b4}.select-container .select.open:after{content:\"\\f286\"}.select-container .cta{font-family:Lato,sans-serif;border-radius:4px;border-style:none;cursor:pointer;color:#fff;background-color:#29497f!important;min-width:180px;max-width:-moz-fit-content;max-width:fit-content;max-height:60px}.select-container .cta:after{color:#fff}.select-container .cta .select-options{min-width:234px;width:auto;margin-left:-53px}.select-container .select-options{z-index:2;width:auto;margin-top:9px;box-shadow:0 8px 20px #0000001a;position:relative}.select-container .select-options.hide{display:none}.select-container .select-options .option{margin:8px 0;width:100%;padding:10px 12px;display:grid;grid-template-areas:\"options\";align-items:center}.select-container .select-options .option:hover{background-color:#59595a0f;cursor:pointer}.select-container .select-options .option.hide:after{display:none!important}.select-container .select-options .option.hide .select-target{padding-right:0}.select-container .select-options .option.active:after{grid-area:options;justify-self:end;content:\"\";height:16px;width:14px;pointer-events:none;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIiA/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZlcnNpb249IjEuMSIgd2lkdGg9IjY0MCIgaGVpZ2h0PSI0ODAiIHZpZXdCb3g9IjAgMCA2NDAgNDgwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPGRlc2M+Q3JlYXRlZCB3aXRoIEZhYnJpYy5qcyAzLjYuMzwvZGVzYz4KPGRlZnM+CjwvZGVmcz4KPGcgdHJhbnNmb3JtPSJtYXRyaXgoMS40MyAwIDAgMS40MyAzMjAuMTYgMjM4Ljg3KSIgID4KPHBhdGggc3R5bGU9InN0cm9rZTogbm9uZTsgc3Ryb2tlLXdpZHRoOiAxOyBzdHJva2UtZGFzaGFycmF5OiBub25lOyBzdHJva2UtbGluZWNhcDogYnV0dDsgc3Ryb2tlLWRhc2hvZmZzZXQ6IDA7IHN0cm9rZS1saW5lam9pbjogbWl0ZXI7IHN0cm9rZS1taXRlcmxpbWl0OiA0OyBmaWxsOiByZ2IoNzMsMTE2LDI0NSk7IGZpbGwtcnVsZTogbm9uemVybzsgb3BhY2l0eTogMTsiICB0cmFuc2Zvcm09IiB0cmFuc2xhdGUoLTI1NS45NSwgLTI1Ni4wNSkiIGQ9Ik0gNDcwLjYgMTA1LjQgYyAxMi41IDEyLjUgMTIuNSAzMi44IDAgNDUuMyBsIC0yNTYgMjU2IGMgLTEyLjUgMTIuNSAtMzIuOCAxMi41IC00NS4zIDAgbCAtMTI4IC0xMjggYyAtMTIuNSAtMTIuNSAtMTIuNSAtMzIuOCAwIC00NS4zIHMgMzIuOCAtMTIuNSA0NS4zIDAgTCAxOTIgMzM4LjcgTCA0MjUuNCAxMDUuNCBjIDEyLjUgLTEyLjUgMzIuOCAtMTIuNSA0NS4zIDAgeiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiAvPgo8L2c+Cjwvc3ZnPg==);background-repeat:no-repeat;background-position:center center;background-size:100%}.select-container .select-options .option p{grid-area:options;margin:0;padding-right:30px;color:#161617;font-family:Inter,sans-serif!important}.select-container.large .selected,.select-container.large .select-options{font-size:16px;padding:14px 12px}.select-container.error .selected{border-color:#ab2225;background:#faedee}.select-container.error .selected:hover{border-color:#931c1f}.select-container.error .selected:focus-visible{outline:solid 3px hsl(225deg,90%,62%)}.select-container.error .selected.active{border-color:#931c1f;background-color:ircc-ca-error-active}\n"], dependencies: [{ kind: "directive", type: i1.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i1.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "pipe", type: i2.TranslatePipe, name: "translate" }], preserveWhitespaces: true });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.1.3", ngImport: i0, type: JLDropdownComponent, decorators: [{
            type: Component,
            args: [{ selector: 'jl-pr-sclp-dropdown', providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            multi: true,
                            useExisting: JLDropdownComponent
                        },
                        {
                            provide: NG_VALIDATORS,
                            multi: true,
                            useExisting: JLDropdownComponent
                        }
                    ], template: "<ng-container *ngIf=\"(config?.options || options || []).length > 0; then notEmpty; else isEmpty\">\n  <!-- an *ngIf may be better here, since there are only two cases -->\n</ng-container>\n<ng-template #notEmpty>\n  <div class=\"select-container\" [ngClass]=\"{ large: config?.large || large, error: config?.error || error }\">\n    <div\n      class=\"select\"\n      [ngClass]=\"!hideDropdown ? 'open' : ''\"\n      [class]=\"(config?.type || type || dropdownTypes.input)\"\n    >\n      <div\n        tabindex=\"0\"\n        class=\"selected input\"\n        (keyup)=\"toggleDropDownKey($event)\"\n        [ngClass]=\"!hideDropdown ? 'active' : ''\"\n        *ngIf=\"(config?.type === dropdownTypes.input) || (type === dropdownTypes.input)\"\n      >\n        {{ getOptions(config?.selectedIndex || selectedIndex || 0) | translate }}\n      </div>\n\n      <div\n        tabindex=\"0\"\n        class=\"selected cta\"\n        (keyup)=\"toggleDropDownKey($event)\"\n        [ngClass]=\"!hideDropdown ? 'active' : ''\"\n        *ngIf=\"(config?.type === dropdownTypes.cta) || (type === dropdownTypes.cta)\"\n      >\n        {{ (config?.text || text || '') | translate }}\n      </div>\n\n      <div\n        class=\"select-options\"\n        [ngClass]=\"!hideDropdown ? '' : 'hide'\"\n      >\n        <div\n          *ngFor=\"let option of config?.options || options; let index = index\" \n          class=\"option select-target\"\n          (click)=\"selectIndex(index)\"\n          [tabindex]=\"index + 1\"\n          [ngClass]=\"{ active: index === (config?.selectedIndex || selectedIndex || 0), hide: (config?.type === dropdownTypes.cta) || (type === dropdownTypes.cta) }\"\n        > \n        <!-- TODO: Check if the above line defaults to 0 if the selectedIndex is undefined, or if it also triggers if 0 -->\n          <p class=\"select-target\">{{ option.text | translate }}</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</ng-template>\n\n<ng-template #isEmpty>\n  <div\n    class=\"select-container empty\"\n    [ngClass]=\"{ large: config?.large || large, error: config?.error || error }\"\n  >\n    <div class=\"select\">\n      <div tabindex=\"0\" class=\"selected\">&#160;</div>\n    </div>\n  </div>\n</ng-template>\n", styles: [".gray-bg{background:#f5f5f5}.dark-gray-bg{background:#d9d9d9}.select-container{-webkit-user-select:none;user-select:none}.select-container .select{height:40px;min-width:15ch;max-width:30ch;justify-self:stretch;display:grid;grid-template-areas:\"select\";align-items:center;width:100%}.select-container .select:after{content:\"\\f282\";color:#161617;font-family:bootstrap-icons!important;grid-area:select;justify-self:end;margin-right:14px;height:16px;width:14px;line-height:initial;pointer-events:none;transition:all .1s}.select-container .selected{-webkit-appearance:none;appearance:none;background-color:transparent;border:none;margin:0;font-family:inherit;font-size:inherit;cursor:inherit;line-height:inherit;padding:10px 30px 10px 12px;cursor:pointer;grid-area:select}@keyframes active{0%{background-color:#59595a1f}99%{background-color:#59595a1f}to{background-color:transparent}}.select-container .selected:hover{background-color:#59595a0f}.select-container .selected:focus-visible{outline:solid 3px hsl(225deg,90%,62%)}.select-container .selected.active{background-color:transparent;animation-name:active;animation-duration:2s}.select-container .selected,.select-container .select-options{background:#ffffff;font-size:14px;line-height:20px;color:#161617;font-family:Inter,sans-serif!important;border-radius:4px;border:1px solid #b2b2b4}.select-container .select.open:after{content:\"\\f286\"}.select-container .cta{font-family:Lato,sans-serif;border-radius:4px;border-style:none;cursor:pointer;color:#fff;background-color:#29497f!important;min-width:180px;max-width:-moz-fit-content;max-width:fit-content;max-height:60px}.select-container .cta:after{color:#fff}.select-container .cta .select-options{min-width:234px;width:auto;margin-left:-53px}.select-container .select-options{z-index:2;width:auto;margin-top:9px;box-shadow:0 8px 20px #0000001a;position:relative}.select-container .select-options.hide{display:none}.select-container .select-options .option{margin:8px 0;width:100%;padding:10px 12px;display:grid;grid-template-areas:\"options\";align-items:center}.select-container .select-options .option:hover{background-color:#59595a0f;cursor:pointer}.select-container .select-options .option.hide:after{display:none!important}.select-container .select-options .option.hide .select-target{padding-right:0}.select-container .select-options .option.active:after{grid-area:options;justify-self:end;content:\"\";height:16px;width:14px;pointer-events:none;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIiA/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZlcnNpb249IjEuMSIgd2lkdGg9IjY0MCIgaGVpZ2h0PSI0ODAiIHZpZXdCb3g9IjAgMCA2NDAgNDgwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPGRlc2M+Q3JlYXRlZCB3aXRoIEZhYnJpYy5qcyAzLjYuMzwvZGVzYz4KPGRlZnM+CjwvZGVmcz4KPGcgdHJhbnNmb3JtPSJtYXRyaXgoMS40MyAwIDAgMS40MyAzMjAuMTYgMjM4Ljg3KSIgID4KPHBhdGggc3R5bGU9InN0cm9rZTogbm9uZTsgc3Ryb2tlLXdpZHRoOiAxOyBzdHJva2UtZGFzaGFycmF5OiBub25lOyBzdHJva2UtbGluZWNhcDogYnV0dDsgc3Ryb2tlLWRhc2hvZmZzZXQ6IDA7IHN0cm9rZS1saW5lam9pbjogbWl0ZXI7IHN0cm9rZS1taXRlcmxpbWl0OiA0OyBmaWxsOiByZ2IoNzMsMTE2LDI0NSk7IGZpbGwtcnVsZTogbm9uemVybzsgb3BhY2l0eTogMTsiICB0cmFuc2Zvcm09IiB0cmFuc2xhdGUoLTI1NS45NSwgLTI1Ni4wNSkiIGQ9Ik0gNDcwLjYgMTA1LjQgYyAxMi41IDEyLjUgMTIuNSAzMi44IDAgNDUuMyBsIC0yNTYgMjU2IGMgLTEyLjUgMTIuNSAtMzIuOCAxMi41IC00NS4zIDAgbCAtMTI4IC0xMjggYyAtMTIuNSAtMTIuNSAtMTIuNSAtMzIuOCAwIC00NS4zIHMgMzIuOCAtMTIuNSA0NS4zIDAgTCAxOTIgMzM4LjcgTCA0MjUuNCAxMDUuNCBjIDEyLjUgLTEyLjUgMzIuOCAtMTIuNSA0NS4zIDAgeiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiAvPgo8L2c+Cjwvc3ZnPg==);background-repeat:no-repeat;background-position:center center;background-size:100%}.select-container .select-options .option p{grid-area:options;margin:0;padding-right:30px;color:#161617;font-family:Inter,sans-serif!important}.select-container.large .selected,.select-container.large .select-options{font-size:16px;padding:14px 12px}.select-container.error .selected{border-color:#ab2225;background:#faedee}.select-container.error .selected:hover{border-color:#931c1f}.select-container.error .selected:focus-visible{outline:solid 3px hsl(225deg,90%,62%)}.select-container.error .selected.active{border-color:#931c1f;background-color:ircc-ca-error-active}\n"] }]
        }], ctorParameters: function () { return [{ type: i0.KeyValueDiffers }]; }, propDecorators: { config: [{
                type: Input
            }], options: [{
                type: Input
            }], id: [{
                type: Input
            }], type: [{
                type: Input
            }], text: [{
                type: Input
            }], large: [{
                type: Input
            }], error: [{
                type: Input
            }], selectedIndex: [{
                type: Input
            }], handleKeyDown: [{
                type: HostListener,
                args: ['window:keydown.escape', ['$event']]
            }], clickInside: [{
                type: HostListener,
                args: ['click', ['$event']]
            }], clickout: [{
                type: HostListener,
                args: ['document:click']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiamwtZHJvcGRvd24uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vY29tcG9uZW50LWxpYi9zcmMvbGliL2psLWRyb3Bkb3duL2psLWRyb3Bkb3duLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL2NvbXBvbmVudC1saWIvc3JjL2xpYi9qbC1kcm9wZG93bi9qbC1kcm9wZG93bi5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvREFBb0Q7QUFFcEQsT0FBTyxFQUNMLFNBQVMsRUFFVCxZQUFZLEVBQ1osS0FBSyxHQUVOLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBeUMsYUFBYSxFQUFFLGlCQUFpQixFQUErQixNQUFNLGdCQUFnQixDQUFDO0FBRXRJLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxzRkFBc0YsQ0FBQzs7OztBQW9DckgsTUFBTSxPQUFPLG1CQUFtQjtJQW1DOUIsWUFBb0IsT0FBd0I7UUFBeEIsWUFBTyxHQUFQLE9BQU8sQ0FBaUI7UUFSNUMsaUJBQVksR0FBRyxJQUFJLENBQUM7UUFDcEIsMkJBQXNCLEdBQUcsS0FBSyxDQUFDO1FBQy9CLHVCQUFrQixHQUFHLEtBQUssQ0FBQztRQUMzQixrQkFBYSxHQUFHLGFBQWEsQ0FBQztRQUU5QixZQUFPLEdBQUcsS0FBSyxDQUFDO1FBQ2hCLGVBQVUsR0FBRyxLQUFLLENBQUM7UUFJbkIsYUFBUSxHQUFHLENBQUMsS0FBYSxFQUFFLEVBQUUsR0FBRSxDQUFDLENBQUM7UUFDakMsY0FBUyxHQUFHLEdBQUcsRUFBRSxHQUFFLENBQUMsQ0FBQztJQUZyQixDQUFDO0lBSUQsUUFBUSxDQUFDLE9BQWtDO1FBQ3pDLE9BQU8sT0FBTyxDQUFDLE1BQU0sQ0FBQTtJQUN2QixDQUFDO0lBRUQsVUFBVSxDQUFDLEtBQVU7UUFDbkIsK0VBQStFO0lBQ2pGLENBQUM7SUFDRCxnQkFBZ0IsQ0FBQyxRQUFhO1FBQzVCLElB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O3NCQURaLFlBQVk7dUJBQUMsdUJBQXVCLEVBQUUsQ0FBQyxRQUFRLENBQUM7Z0JBV2pELFdBQVc7c0JBRFYsWUFBWTt1QkFBQyxPQUFPLEVBQUUsQ0FBQyxRQUFRLENBQUM7Z0JBbUJqQyxRQUFRO3NCQURQLFlBQVk7dUJBQUMsZ0JBQWdCIiwic291cmNlc0NvbnRlbnQiOlsiLy8gVE9ETzogQ2Fubm90IGVudGVyIGRyb3Bkb3duIG1lbnUgd2l0aCBrZXlib2FyZCEhIVxuXG5pbXBvcnQge1xuICBDb21wb25lbnQsXG4gIE9uSW5pdCxcbiAgSG9zdExpc3RlbmVyLFxuICBJbnB1dCxcbiAgS2V5VmFsdWVEaWZmZXJzLFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEFic3RyYWN0Q29udHJvbCwgQ29udHJvbFZhbHVlQWNjZXNzb3IsIE5HX1ZBTElEQVRPUlMsIE5HX1ZBTFVFX0FDQ0VTU09SLCBWYWxpZGF0aW9uRXJyb3JzLCBWYWxpZGF0b3IgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5cbmltcG9ydCB7IERyb3Bkb3duVHlwZXMgfSBmcm9tICcuLi8uLi9zaGFyZWQvY29uc3RhbnRzL2psLWNvbXBvbmVudHMvamwtY29tcG9uZW50cy5jb25zdGFudHMvamwtY29tcG9uZW50cy5jb25zdGFudHMnO1xuaW1wb3J0IHsgSUNvbXBvbmVudE91dHB1dEV2ZW50IH0gZnJvbSAnLi4vLi4vc2hhcmVkL2ludGVyZmFjZXMvY29tcG9uZW50LWNvbmZpZ3MnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElKTERyb3Bkb3duQ29tcG9uZW50Q29uZmlnIHtcbiAgdHlwZTogRHJvcGRvd25UeXBlcztcbiAgb3B0aW9uczogSUpMRHJvcGRvd25PcHRpb25zW107XG4gIHRleHQ/OiBzdHJpbmc7XG4gIGxhcmdlPzogYm9vbGVhbjsgLy9UT0RPOiBUaGlzIHNob3VsZCBiZSBjaGFuZ2VkIHRvICdzbWFsbCcgbGlrZSBhbGwgdGhlIG90aGVyc1xuICBlcnJvcj86IGJvb2xlYW47XG4gIC8vIGVtcHR5PzogYm9vbGVhbjsgLy9EZWZhdWx0IFRSVUUgYnV0IGRvZXNuJ3QgZG8gYW55dGhpbmdcbiAgc2VsZWN0ZWRJbmRleD86IG51bWJlcjtcbiAgaWQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJSkxEcm9wZG93bk9wdGlvbnMge1xuICB0ZXh0OiBzdHJpbmc7XG4gIHZhbHVlPzogc3RyaW5nO1xufVxuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdqbC1wci1zY2xwLWRyb3Bkb3duJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2psLWRyb3Bkb3duLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vamwtZHJvcGRvd24uc2NzcyddLFxuICBwcm92aWRlcnM6IFtcbiAgICB7XG4gICAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcbiAgICAgIG11bHRpOnRydWUsXG4gICAgICB1c2VFeGlzdGluZzogSkxEcm9wZG93bkNvbXBvbmVudFxuICAgIH0sXG4gICAge1xuICAgICAgcHJvdmlkZTogTkdfVkFMSURBVE9SUyxcbiAgICAgIG11bHRpOiB0cnVlLFxuICAgICAgdXNlRXhpc3Rpbmc6IEpMRHJvcGRvd25Db21wb25lbnRcbiAgICB9XG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgSkxEcm9wZG93bkNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQ29udHJvbFZhbHVlQWNjZXNzb3IsIFZhbGlkYXRvciB7XG4gIC8vIEBJbnB1dCgpIG9wdGlvbnM6IElKTERyb3Bkb3duT3B0aW9uc1tdID0gW1xuICAvLyAgIHtcbiAgLy8gICAgIHRleHQ6IGBUZXh0YCxcbiAgLy8gICAgIHZhbHVlOiBgVmFsdWVgXG4gIC8vICAgfVxuICAvLyBdO1xuXG4gIC8vIEBJbnB1dCgpIHR5cGUgPSBEcm9wZG93blR5cGVzLmlucHV0O1xuICAvLyBASW5wdXQoKSB0ZXh0ID0gYGA7XG4gIC8vIEBJbnB1dCgpIGxhcmdlID0gZmFsc2U7XG4gIC8vIEBJbnB1dCgpIGVycm9yID0gZmFsc2U7XG4gIC8vIEBJbnB1dCgpIGVtcHR5ID0gdHJ1ZTtcbiAgLy8gQElucHV0KCkgc2VsZWN0ZWRJbmRleCA9IDA7XG5cbiAgQElucHV0KCkgY29uZmlnPzogSUpMRHJvcGRvd25Db21wb25lbnRDb25maWc7XG5cbiAgLy9PcHRpb25hbGx5LCBpbmRpdmlkdWFsIHBhcmFtZXRlcnMgY2FuIGJlIHVzZWQgaW5zdGVhZC5cbiAgQElucHV0KCkgb3B0aW9ucz86IElKTERyb3Bkb3duT3B0aW9uc1tdXG4gIEBJbnB1dCgpIGlkPzogc3RyaW5nO1xuICBASW5wdXQoKSB0eXBlPzogRHJvcGRvd25UeXBlcztcbiAgQElucHV0KCkgdGV4dD86IHN0cmluZztcbiAgQElucHV0KCkgbGFyZ2U/OiB0cnVlO1xuICBASW5wdXQoKSBlcnJvcj86IHRydWU7XG4gIC8vIEBJbnB1dCgpIGVtcHR5PzogdHJ1ZTtcbiAgQElucHV0KCkgc2VsZWN0ZWRJbmRleD86IG51bWJlcjtcblxuICBoaWRlRHJvcGRvd24gPSB0cnVlO1xuICBpc0ZvY3VzSW5zaWRlQ29tcG9uZW50ID0gZmFsc2U7XG4gIGlzQ29tcG9uZW50Q2xpY2tlZCA9IGZhbHNlO1xuICBkcm9wZG93blR5cGVzID0gRHJvcGRvd25UeXBlcztcblxuICB0b3VjaGVkID0gZmFsc2U7XG4gIGlzRGlzYWJsZWQgPSBmYWxzZTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGRpZmZlcnM6IEtleVZhbHVlRGlmZmVycykge1xuICB9XG4gIG9uQ2hhbmdlID0gKHZhbHVlOiBzdHJpbmcpID0+IHt9O1xuICBvblRvdWNoZWQgPSAoKSA9PiB7fTtcblxuICB2YWxpZGF0ZShjb250cm9sOiBBYnN0cmFjdENvbnRyb2w8YW55LCBhbnk+KTogVmFsaWRhdGlvbkVycm9ycyB8IG51bGwge1xuICAgIHJldHVybiBjb250cm9sLmVycm9yc1xuICB9XG5cbiAgd3JpdGVWYWx1ZSh2YWx1ZTogYW55KSB7XG4gICAgLy9UT0RPOiBUaGlzIG5lZWRzIHRvIGJlIHdyaXR0ZW4gdG8gc2V0IHRoZSB2YWx1ZSBhbmQgdGhlIGN1cnJlbnQgaW5kZXggbnVtYmVyO1xuICB9XG4gIHJlZ2lzdGVyT25DaGFuZ2Uob25DaGFuZ2U6IGFueSkge1xuICAgIHRoaXMub25DaGFuZ2UgPSBvbkNoYW5nZTtcbiAgfVxuICByZWdpc3Rlck9uVG91Y2hlZChvblRvdWNoZWQ6IGFueSkge1xuICAgIHRoaXMub25Ub3VjaGVkID0gb25Ub3VjaGVkO1xuICB9XG4gIHNldERpc2FibGVkU3RhdGU/KGlzRGlzYWJsZWQ6IGJvb2xlYW4pIHtcbiAgICAvLyAodGhpcy5jb25maWcgIT09IHVuZGVmaW5lZCkgPyB0aGlzLmNvbmZpZy5kaXNhYmxlZCA9IGlzRGlzYWJsZWQgOiB0aGlzLmRpc2FibGVkID0gaXNEaXNhYmxlZDtcbiAgICB0aGlzLmlzRGlzYWJsZWQgPSBpc0Rpc2FibGVkO1xuICB9XG5cbiAgbWFya0FzVG91Y2hlZCgpIHtcbiAgICBpZiAoIXRoaXMudG91Y2hlZCkge1xuICAgICAgdGhpcy5vblRvdWNoZWQoKTtcbiAgICAgIHRoaXMudG91Y2hlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgQEhvc3RMaXN0ZW5lcignd2luZG93OmtleWRvd24uZXNjYXBlJywgWyckZXZlbnQnXSlcbiAgaGFuZGxlS2V5RG93bihldmVudDogS2V5Ym9hcmRFdmVudCkge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGlmICh0aGlzLmhpZGVEcm9wZG93biA9PT0gZmFsc2UgfHwgKHRoaXMuY29uZmlnPy5vcHRpb25zIHx8IFtdKS5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLmlzQ29tcG9uZW50Q2xpY2tlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5pc0ZvY3VzSW5zaWRlQ29tcG9uZW50ID0gZmFsc2U7XG4gICAgICB0aGlzLmhpZGVEcm9wZG93biA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgQEhvc3RMaXN0ZW5lcignY2xpY2snLCBbJyRldmVudCddKVxuICBjbGlja0luc2lkZShldmVudDogeyB0YXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnQgfSkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldDtcblxuICAgIGlmICh0aGlzLmhpZGVEcm9wZG93biA9PT0gdHJ1ZSAmJiB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKGBzZWxlY3RlZGApKSB7XG4gICAgICB0aGlzLmlzRm9jdXNJbnNpZGVDb21wb25lbnQgPSB0cnVlO1xuICAgICAgdGhpcy5pc0NvbXBvbmVudENsaWNrZWQgPSB0cnVlO1xuICAgICAgdGhpcy5oaWRlRHJvcGRvd24gPSBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0LXRhcmdldCcpIHx8XG4gICAgICB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKGBzZWxlY3RlZGApXG4gICAgKSB7XG4gICAgICB0aGlzLmlzQ29tcG9uZW50Q2xpY2tlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5pc0ZvY3VzSW5zaWRlQ29tcG9uZW50ID0gZmFsc2U7XG4gICAgICB0aGlzLmhpZGVEcm9wZG93biA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgQEhvc3RMaXN0ZW5lcignZG9jdW1lbnQ6Y2xpY2snKVxuICBjbGlja291dCgpIHtcbiAgICBpZiAoIXRoaXMuaXNGb2N1c0luc2lkZUNvbXBvbmVudCAmJiB0aGlzLmlzQ29tcG9uZW50Q2xpY2tlZCkge1xuICAgICAgdGhpcy50b2dnbGVEcm9wRG93bigpO1xuXG4gICAgICB0aGlzLmlzQ29tcG9uZW50Q2xpY2tlZCA9IGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLmlzRm9jdXNJbnNpZGVDb21wb25lbnQgPSBmYWxzZTtcbiAgfVxuXG4gIHB1YmxpYyB0b2dnbGVEcm9wRG93bigpIHtcbiAgICB0aGlzLmhpZGVEcm9wZG93biA9ICF0aGlzLmhpZGVEcm9wZG93bjtcbiAgfVxuXG4gIHB1YmxpYyB0b2dnbGVEcm9wRG93bktleShldmVudDogS2V5Ym9hcmRFdmVudCkge1xuICAgIGlmIChldmVudC5rZXlDb2RlID09PSAxMykgeyAvL1RPRE86IENoYW5nZWQgdW50aWwgY29uc3QgY2FuIGJlIGFkZGVkLlxuICAgICAgLy8gaWYgKGV2ZW50LmtleSA9PT0gS2V5Ym9hcmRFdmVudHMuZW50ZXIpIHtcbiAgICAgIHRoaXMudG9nZ2xlRHJvcERvd24oKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVE9ETzogSSd2ZSBiYW5kLWFpZGVkIHRoaXMgb25lIHNvIHRoYXQgaXQgd29ya3MuIENhbiBwcm9iYWJseSByZW1vdmUgdGhlIGVudGlyZVxuICAgKiBjdXN0b20gRG9DaGVjayBieSBqdXN0IGRvaW5nIHRoaXMuXG4gICAqIEBwYXJhbSBpbmRleCBcbiAgICovXG4gIHB1YmxpYyBzZWxlY3RJbmRleChpbmRleDogbnVtYmVyKSB7XG4gICAgaWYgKHRoaXMuY29uZmlnKSB7XG4gICAgICBsZXQgZW1pdCA9IGZhbHNlO1xuICAgICAgaWYgKHRoaXMuY29uZmlnLnNlbGVjdGVkSW5kZXggIT09IGluZGV4KSB7XG4gICAgICAgIGVtaXQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgdGhpcy5jb25maWcuc2VsZWN0ZWRJbmRleCA9IGluZGV4O1xuICAgICAgZW1pdCA/IHRoaXMub25DaGFuZ2UodGhpcy5jb25maWc/Lm9wdGlvbnNbKHRoaXMuY29uZmlnPy5zZWxlY3RlZEluZGV4IHx8IDApXS52YWx1ZSB8fCAnJykgOiAnJztcbiAgICAgIC8vIGVtaXQgPyB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQoeyBpZDogdGhpcy5jb25maWc/LmlkIHx8ICcnLCB2YWx1ZTogdGhpcy5jb25maWc/Lm9wdGlvbnNbKHRoaXMuY29uZmlnPy5zZWxlY3RlZEluZGV4IHx8IDApXS52YWx1ZSB8fCAnJyB9KSA6ICcnO1xuICAgIH1cbiAgfVxuXG4gIGdldE9wdGlvbnMoaW5kZXg6IG51bWJlcikge1xuICAgIGlmICh0aGlzLmNvbmZpZykge1xuICAgICAgcmV0dXJuIHRoaXMuY29uZmlnLm9wdGlvbnNbaW5kZXhdLnRleHQ7XG4gICAgfVxuICAgIHJldHVybiAnJztcbiAgfVxuXG4gIG5nT25Jbml0KCk6IHZvaWQgeyB9XG59XG4iLCI8bmctY29udGFpbmVyICpuZ0lmPVwiKGNvbmZpZz8ub3B0aW9ucyB8fCBvcHRpb25zIHx8IFtdKS5sZW5ndGggPiAwOyB0aGVuIG5vdEVtcHR5OyBlbHNlIGlzRW1wdHlcIj5cbiAgPCEtLSBhbiAqbmdJZiBtYXkgYmUgYmV0dGVyIGhlcmUsIHNpbmNlIHRoZXJlIGFyZSBvbmx5IHR3byBjYXNlcyAtLT5cbjwvbmctY29udGFpbmVyPlxuPG5nLXRlbXBsYXRlICNub3RFbXB0eT5cbiAgPGRpdiBjbGFzcz1cInNlbGVjdC1jb250YWluZXJcIiBbbmdDbGFzc109XCJ7IGxhcmdlOiBjb25maWc/LmxhcmdlIHx8IGxhcmdlLCBlcnJvcjogY29uZmlnPy5lcnJvciB8fCBlcnJvciB9XCI+XG4gICAgPGRpdlxuICAgICAgY2xhc3M9XCJzZWxlY3RcIlxuICAgICAgW25nQ2xhc3NdPVwiIWhpZGVEcm9wZG93biA/ICdvcGVuJyA6ICcnXCJcbiAgICAgIFtjbGFzc109XCIoY29uZmlnPy50eXBlIHx8IHR5cGUgfHwgZHJvcGRvd25UeXBlcy5pbnB1dClcIlxuICAgID5cbiAgICAgIDxkaXZcbiAgICAgICAgdGFiaW5kZXg9XCIwXCJcbiAgICAgICAgY2xhc3M9XCJzZWxlY3RlZCBpbnB1dFwiXG4gICAgICAgIChrZXl1cCk9XCJ0b2dnbGVEcm9wRG93bktleSgkZXZlbnQpXCJcbiAgICAgICAgW25nQ2xhc3NdPVwiIWhpZGVEcm9wZG93biA/ICdhY3RpdmUnIDogJydcIlxuICAgICAgICAqbmdJZj1cIihjb25maWc/LnR5cGUgPT09IGRyb3Bkb3duVHlwZXMuaW5wdXQpIHx8ICh0eXBlID09PSBkcm9wZG93blR5cGVzLmlucHV0KVwiXG4gICAgICA+XG4gICAgICAgIHt7IGdldE9wdGlvbnMoY29uZmlnPy5zZWxlY3RlZEluZGV4IHx8IHNlbGVjdGVkSW5kZXggfHwgMCkgfCB0cmFuc2xhdGUgfX1cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8ZGl2XG4gICAgICAgIHRhYmluZGV4PVwiMFwiXG4gICAgICAgIGNsYXNzPVwic2VsZWN0ZWQgY3RhXCJcbiAgICAgICAgKGtleXVwKT1cInRvZ2dsZURyb3BEb3duS2V5KCRldmVudClcIlxuICAgICAgICBbbmdDbGFzc109XCIhaGlkZURyb3Bkb3duID8gJ2FjdGl2ZScgOiAnJ1wiXG4gICAgICAgICpuZ0lmPVwiKGNvbmZpZz8udHlwZSA9PT0gZHJvcGRvd25UeXBlcy5jdGEpIHx8ICh0eXBlID09PSBkcm9wZG93blR5cGVzLmN0YSlcIlxuICAgICAgPlxuICAgICAgICB7eyAoY29uZmlnPy50ZXh0IHx8IHRleHQgfHwgJycpIHwgdHJhbnNsYXRlIH19XG4gICAgICA8L2Rpdj5cblxuICAgICAgPGRpdlxuICAgICAgICBjbGFzcz1cInNlbGVjdC1vcHRpb25zXCJcbiAgICAgICAgW25nQ2xhc3NdPVwiIWhpZGVEcm9wZG93biA/ICcnIDogJ2hpZGUnXCJcbiAgICAgID5cbiAgICAgICAgPGRpdlxuICAgICAgICAgICpuZ0Zvcj1cImxldCBvcHRpb24gb2YgY29uZmlnPy5vcHRpb25zIHx8IG9wdGlvbnM7IGxldCBpbmRleCA9IGluZGV4XCIgXG4gICAgICAgICAgY2xhc3M9XCJvcHRpb24gc2VsZWN0LXRhcmdldFwiXG4gICAgICAgICAgKGNsaWNrKT1cInNlbGVjdEluZGV4KGluZGV4KVwiXG4gICAgICAgICAgW3RhYmluZGV4XT1cImluZGV4ICsgMVwiXG4gICAgICAgICAgW25nQ2xhc3NdPVwieyBhY3RpdmU6IGluZGV4ID09PSAoY29uZmlnPy5zZWxlY3RlZEluZGV4IHx8IHNlbGVjdGVkSW5kZXggfHwgMCksIGhpZGU6IChjb25maWc/LnR5cGUgPT09IGRyb3Bkb3duVHlwZXMuY3RhKSB8fCAodHlwZSA9PT0gZHJvcGRvd25UeXBlcy5jdGEpIH1cIlxuICAgICAgICA+IFxuICAgICAgICA8IS0tIFRPRE86IENoZWNrIGlmIHRoZSBhYm92ZSBsaW5lIGRlZmF1bHRzIHRvIDAgaWYgdGhlIHNlbGVjdGVkSW5kZXggaXMgdW5kZWZpbmVkLCBvciBpZiBpdCBhbHNvIHRyaWdnZXJzIGlmIDAgLS0+XG4gICAgICAgICAgPHAgY2xhc3M9XCJzZWxlY3QtdGFyZ2V0XCI+e3sgb3B0aW9uLnRleHQgfCB0cmFuc2xhdGUgfX08L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuPC9uZy10ZW1wbGF0ZT5cblxuPG5nLXRlbXBsYXRlICNpc0VtcHR5PlxuICA8ZGl2XG4gICAgY2xhc3M9XCJzZWxlY3QtY29udGFpbmVyIGVtcHR5XCJcbiAgICBbbmdDbGFzc109XCJ7IGxhcmdlOiBjb25maWc/LmxhcmdlIHx8IGxhcmdlLCBlcnJvcjogY29uZmlnPy5lcnJvciB8fCBlcnJvciB9XCJcbiAgPlxuICAgIDxkaXYgY2xhc3M9XCJzZWxlY3RcIj5cbiAgICAgIDxkaXYgdGFiaW5kZXg9XCIwXCIgY2xhc3M9XCJzZWxlY3RlZFwiPiYjMTYwOzwvZGl2PlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvbmctdGVtcGxhdGU+XG4iXX0=