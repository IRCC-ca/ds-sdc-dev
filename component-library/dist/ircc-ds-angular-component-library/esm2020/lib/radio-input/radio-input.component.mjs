import { Component, forwardRef, Input } from '@angular/core';
import { FormControl, FormGroup, NG_VALUE_ACCESSOR } from '@angular/forms';
import { DSSizes } from '../../shared/constants/jl-components/jl-components.constants/jl-components.constants';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "@angular/forms";
import * as i3 from "@ngx-translate/core";
export class RadioInputComponent {
    constructor() {
        this.formGroupEmpty = new FormGroup({});
        this.size = DSSizes.large;
        this.sizes = DSSizes;
        this.touched = false;
        this.config = {
            id: '',
            formGroup: this.formGroupEmpty
        };
        this.id = '';
        this.formGroup = this.formGroupEmpty;
        this.onChange = (formValue) => { };
        this.onTouched = () => { };
    }
    writeValue(formValue) {
        // this.form.get('formControl')?.setValue(formValue);
    }
    registerOnChange(onChange) {
        this.onChange = onChange;
    }
    registerOnTouched(onTouched) {
        this.onTouched = onTouched;
    }
    markAsTouched() {
        if (!this.touched) {
            this.onTouched();
            this.touched = true;
        }
    }
    ngOnInit() {
        if (this.config?.small)
            this.size = DSSizes.small;
        if (this.id !== '')
            this.config.id = this.id;
        if (this.formGroup !== this.formGroupEmpty)
            this.config.formGroup = this.formGroup;
        this.config.formGroup.addControl(this.config.id, new FormControl('', this.config.validators));
    }
    /**
     *
     * @param override
     * @returns
     */
    getSize(override) {
        if (override) {
            return override;
        }
        if (this.config?.small) {
            return DSSizes.small;
        }
        return DSSizes.large;
    }
    /**
     * used to disable individual fields (from the config under 'options')
     * @param index of the option field to be disabled
     * @returns null if value is undefined, empty string otherwise. This works with [attr.disabled].
     */
    getDisabled(index) {
        if (this.config.options) {
            if (this.config.options[index].disabled === undefined) {
                return null;
            }
        }
        return '';
    }
}
RadioInputComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "14.1.3", ngImport: i0, type: RadioInputComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });
RadioInputComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "14.1.3", type: RadioInputComponent, selector: "lib-radio-input", inputs: { config: "config", id: "id", formGroup: "formGroup" }, providers: [
        {
            provide: NG_VALUE_ACCESSOR,
            multi: true,
            useExisting: forwardRef(() => RadioInputComponent) //This allows the error state to be turned off and on again
        }
    ], ngImport: i0, template: "<form [formGroup]=\"config.formGroup\">\n    <label *ngIf=\"config.label\"\n       [attr.aria-label]=\"\n          config.formGroup.get(config.id)?.invalid && config.formGroup.get(config.id)?.dirty\n          ? (config.label || '' | translate) + ' ' +\n            (config.helpText || '' | translate) + ' ' + ('INPUT.ERROR' | translate) + ' ' +\n            (config.customErrorText || '' | translate)\n          : (config.label || '' | translate) + ' ' + (config?.helpText || '' | translate)\n       \"\n       [for]=\"config.id\">{{(config.label || '') | translate}}</label>\n    <div *ngFor=\"let option of config.options; let index = index\" class=\"radio\">\n        <ng-container [ngSwitch]=\"getSize(option.sizeOverride)\">\n            <ng-container *ngSwitchCase=\"sizes.small\">\n                <ng-container *ngIf=\"config.error || option.error\">\n                    <input type=\"radio\" value=\"{{option.value || option.text}}\"\n                         [id]=\"config.id + index\" size=\"small\" class=\"ng-invalid\"\n                         [formControlName]=\"config.id ?? 'formControl'\"\n                         [attr.disabled]='getDisabled(index)'>\n                </ng-container>\n                <ng-container *ngIf=\"!config.error && !option.error\">\n                    <input type=\"radio\" value=\"{{option.value || option.text}}\"\n                        [id]=\"config.id + index\" size=\"small\"\n                        [formControlName]=\"config.id ?? 'formControl'\"\n                        [attr.disabled]='getDisabled(index)'>\n                </ng-container>\n            </ng-container>\n\n            <!-- TODO: See if we can remove the error state from here, since it is controlled by the formControl -->\n            <ng-container *ngSwitchDefault>\n                <ng-container *ngIf=\"config.error || option.error\">\n                    <input type=\"radio\" value=\"{{option.value || option.text}}\"\n                        [id]=\"config.id + index\" size=\"large\" class=\"ng-invalid\"\n                        [formControlName]=\"config.id ?? 'formControl'\"\n                        [attr.disabled]='getDisabled(index)'>\n                </ng-container>\n                <ng-container *ngIf=\"!config.error && !option.error\">\n                    <input type=\"radio\" value=\"{{option.value || option.text}}\"\n                        [id]=\"config.id + index\" size=\"large\"\n                        [formControlName]=\"config.id ?? 'formControl'\"\n                        [attr.disabled]='getDisabled(index)'>\n                </ng-container>\n            </ng-container>\n        </ng-container>\n\n        <label for=\"{{config.id}}\">{{option.text | translate}}</label>\n    </div>\n</form>\n", dependencies: [{ kind: "directive", type: i1.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i1.NgSwitch, selector: "[ngSwitch]", inputs: ["ngSwitch"] }, { kind: "directive", type: i1.NgSwitchCase, selector: "[ngSwitchCase]", inputs: ["ngSwitchCase"] }, { kind: "directive", type: i1.NgSwitchDefault, selector: "[ngSwitchDefault]" }, { kind: "directive", type: i2.ɵNgNoValidate, selector: "form:not([ngNoForm]):not([ngNativeValidate])" }, { kind: "directive", type: i2.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i2.RadioControlValueAccessor, selector: "input[type=radio][formControlName],input[type=radio][formControl],input[type=radio][ngModel]", inputs: ["name", "formControlName", "value"] }, { kind: "directive", type: i2.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i2.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { kind: "directive", type: i2.FormGroupDirective, selector: "[formGroup]", inputs: ["formGroup"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { kind: "directive", type: i2.FormControlName, selector: "[formControlName]", inputs: ["formControlName", "disabled", "ngModel"], outputs: ["ngModelChange"] }, { kind: "pipe", type: i3.TranslatePipe, name: "translate" }], preserveWhitespaces: true });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.1.3", ngImport: i0, type: RadioInputComponent, decorators: [{
            type: Component,
            args: [{ selector: 'lib-radio-input', providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            multi: true,
                            useExisting: forwardRef(() => RadioInputComponent) //This allows the error state to be turned off and on again
                        }
                    ], template: "<form [formGroup]=\"config.formGroup\">\n    <label *ngIf=\"config.label\"\n       [attr.aria-label]=\"\n          config.formGroup.get(config.id)?.invalid && config.formGroup.get(config.id)?.dirty\n          ? (config.label || '' | translate) + ' ' +\n            (config.helpText || '' | translate) + ' ' + ('INPUT.ERROR' | translate) + ' ' +\n            (config.customErrorText || '' | translate)\n          : (config.label || '' | translate) + ' ' + (config?.helpText || '' | translate)\n       \"\n       [for]=\"config.id\">{{(config.label || '') | translate}}</label>\n    <div *ngFor=\"let option of config.options; let index = index\" class=\"radio\">\n        <ng-container [ngSwitch]=\"getSize(option.sizeOverride)\">\n            <ng-container *ngSwitchCase=\"sizes.small\">\n                <ng-container *ngIf=\"config.error || option.error\">\n                    <input type=\"radio\" value=\"{{option.value || option.text}}\"\n                         [id]=\"config.id + index\" size=\"small\" class=\"ng-invalid\"\n                         [formControlName]=\"config.id ?? 'formControl'\"\n                         [attr.disabled]='getDisabled(index)'>\n                </ng-container>\n                <ng-container *ngIf=\"!config.error && !option.error\">\n                    <input type=\"radio\" value=\"{{option.value || option.text}}\"\n                        [id]=\"config.id + index\" size=\"small\"\n                        [formControlName]=\"config.id ?? 'formControl'\"\n                        [attr.disabled]='getDisabled(index)'>\n                </ng-container>\n            </ng-container>\n\n            <!-- TODO: See if we can remove the error state from here, since it is controlled by the formControl -->\n            <ng-container *ngSwitchDefault>\n                <ng-container *ngIf=\"config.error || option.error\">\n                    <input type=\"radio\" value=\"{{option.value || option.text}}\"\n                        [id]=\"config.id + index\" size=\"large\" class=\"ng-invalid\"\n                        [formControlName]=\"config.id ?? 'formControl'\"\n                        [attr.disabled]='getDisabled(index)'>\n                </ng-container>\n                <ng-container *ngIf=\"!config.error && !option.error\">\n                    <input type=\"radio\" value=\"{{option.value || option.text}}\"\n                        [id]=\"config.id + index\" size=\"large\"\n                        [formControlName]=\"config.id ?? 'formControl'\"\n                        [attr.disabled]='getDisabled(index)'>\n                </ng-container>\n            </ng-container>\n        </ng-container>\n\n        <label for=\"{{config.id}}\">{{option.text | translate}}</label>\n    </div>\n</form>\n" }]
        }], propDecorators: { config: [{
                type: Input
            }], id: [{
                type: Input
            }], formGroup: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmFkaW8taW5wdXQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vY29tcG9uZW50LWxpYi9zcmMvbGliL3JhZGlvLWlucHV0L3JhZGlvLWlucHV0LmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL2NvbXBvbmVudC1saWIvc3JjL2xpYi9yYWRpby1pbnB1dC9yYWRpby1pbnB1dC5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQVUsTUFBTSxlQUFlLENBQUM7QUFDckUsT0FBTyxFQUVMLFdBQVcsRUFDWCxTQUFTLEVBQ1QsaUJBQWlCLEVBRWxCLE1BQU0sZ0JBQWdCLENBQUM7QUFDeEIsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLHNGQUFzRixDQUFDOzs7OztBQWtDL0csTUFBTSxPQUFPLG1CQUFtQjtJQVhoQztRQVlFLG1CQUFjLEdBQUcsSUFBSSxTQUFTLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDbkMsU0FBSSxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUM7UUFDckIsVUFBSyxHQUFHLE9BQU8sQ0FBQztRQUNoQixZQUFPLEdBQUcsS0FBSyxDQUFDO1FBRVAsV0FBTSxHQUErQjtZQUM1QyxFQUFFLEVBQUUsRUFBRTtZQUNOLFNBQVMsRUFBRSxJQUFJLENBQUMsY0FBYztTQUMvQixDQUFDO1FBQ08sT0FBRSxHQUFHLEVBQUUsQ0FBQztRQUNSLGNBQVMsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDO1FBRXpDLGFBQVEsR0FBRyxDQUFDLFNBQWlCLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUN0QyxjQUFTLEdBQUcsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0tBc0R2QjtJQXJEQyxVQUFVLENBQUMsU0FBYztRQUN2QixxREFBcUQ7SUFDdkQsQ0FBQztJQUNELGdCQUFnQixDQUFDLFFBQWE7UUFDNUIsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7SUFDM0IsQ0FBQztJQUNELGlCQUFpQixDQUFDLFNBQWM7UUFDOUIsSUFBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7SUFDN0IsQ0FBQztJQUVELGFBQWE7UUFDWCxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUNqQixJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7WUFDakIsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7U0FDckI7SUFDSCxDQUFDO0lBRUQsUUFBUTtRQUNOLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRSxLQUFLO1lBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDO1FBQ2xELElBQUksSUFBSSxDQUFDLEVBQUUsS0FBSyxFQUFFO1lBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQztRQUM3QyxJQUFJLElBQUksQ0FBQyxTQUFTLEtBQUssSUFBSSxDQUFDLGNBQWM7WUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDO1FBRW5GLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxJQUFJLFdBQVcsQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO0lBQ2hHLENBQUM7SUFFRDs7OztPQUlHO0lBQ0gsT0FBTyxDQUFDLFFBQTZCO1FBQ25DLElBQUksUUFBUSxFQUFFO1lBQ1osT0FBTyxRQUFRLENBQUM7U0FDakI7UUFDRCxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFO1lBQ3RCLE9BQU8sT0FBTyxDQUFDLEtBQUssQ0FBQztTQUN0QjtRQUNELE9BQU8sT0FBTyxDQUFDLEtBQUssQ0FBQztJQUN2QixDQUFDO0lBRUQ7Ozs7T0FJRztJQUNILFdBQVcsQ0FBQyxLQUFhO1FBQ3ZCLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUU7WUFDdkIsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxRQUFRLEtBQUssU0FBUyxFQUFFO2dCQUNyRCxPQUFPLElBQUksQ0FBQzthQUNiO1NBQ0Y7UUFDRCxPQUFPLEVBQUUsQ0FBQztJQUNaLENBQUM7O2dIQW5FVSxtQkFBbUI7b0dBQW5CLG1CQUFtQiwwR0FSbkI7UUFDVDtZQUNFLE9BQU8sRUFBRSxpQkFBaUI7WUFDMUIsS0FBSyxFQUFFLElBQUk7WUFDWCxXQUFXLEVBQUUsVUFBVSxDQUFDLEdBQUcsRUFBRSxDQUFDLG1CQUFtQixDQUFDLENBQUMsMkRBQTJEO1NBQy9HO0tBQ0YsMEJDeENILHFzRkErQ0E7MkZETGEsbUJBQW1CO2tCQVgvQixTQUFTOytCQUNFLGlCQUFpQixhQUVoQjt3QkFDVDs0QkFDRSxPQUFPLEVBQUUsaUJBQWlCOzRCQUMxQixLQUFLLEVBQUUsSUFBSTs0QkFDWCxXQUFXLEVBQUUsVUFBVSxDQUFDLEdBQUcsRUFBRSxvQkFBb0IsQ0FBQyxDQUFDLDJEQUEyRDt5QkFDL0c7cUJBQ0Y7OEJBUVEsTUFBTTtzQkFBZCxLQUFLO2dCQUlHLEVBQUU7c0JBQVYsS0FBSztnQkFDRyxTQUFTO3NCQUFqQixLQUFLIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBmb3J3YXJkUmVmLCBJbnB1dCwgT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge1xuICBDb250cm9sVmFsdWVBY2Nlc3NvcixcbiAgRm9ybUNvbnRyb2wsXG4gIEZvcm1Hcm91cCxcbiAgTkdfVkFMVUVfQUNDRVNTT1IsXG4gIFZhbGlkYXRvckZuXG59IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IERTU2l6ZXMgfSBmcm9tICcuLi8uLi9zaGFyZWQvY29uc3RhbnRzL2psLWNvbXBvbmVudHMvamwtY29tcG9uZW50cy5jb25zdGFudHMvamwtY29tcG9uZW50cy5jb25zdGFudHMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElSYWRpb0lucHV0Q29tcG9uZW50Q29uZmlnIHtcbiAgaWQ6IHN0cmluZztcbiAgZm9ybUdyb3VwOiBGb3JtR3JvdXA7XG4gIGxhYmVsPzogc3RyaW5nO1xuICBvcHRpb25zPzogSVJhZGlvSW5wdXRPcHRpb25bXTtcbiAgc21hbGw/OiB0cnVlOyAvL0RlZmF1bHQgaXMgbGFyZ2UgaW4gdGhlIERTLCBzbyB0aGlzIGlzIHRvIGtlZXAgdGhpbmdzIGNvbnNpc3RlbnQuXG4gIGRpc2FibGVkPzogYm9vbGVhbjtcbiAgZXJyb3I/OiB0cnVlO1xuICB2YWxpZGF0b3JzPzogVmFsaWRhdG9yRm5bXTtcbiAgaGVscFRleHQ/OiBzdHJpbmc7XG4gIGN1c3RvbUVycm9yVGV4dD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJUmFkaW9JbnB1dE9wdGlvbiB7XG4gIHRleHQ6IHN0cmluZztcbiAgdmFsdWU/OiBzdHJpbmc7XG4gIHNpemVPdmVycmlkZT86IERTU2l6ZXM7XG4gIGRpc2FibGVkPzogdHJ1ZTtcbiAgZXJyb3I/OiB0cnVlO1xufVxuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdsaWItcmFkaW8taW5wdXQnLFxuICB0ZW1wbGF0ZVVybDogJy4vcmFkaW8taW5wdXQuY29tcG9uZW50Lmh0bWwnLFxuICBwcm92aWRlcnM6IFtcbiAgICB7XG4gICAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcbiAgICAgIG11bHRpOiB0cnVlLFxuICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gUmFkaW9JbnB1dENvbXBvbmVudCkgLy9UaGlzIGFsbG93cyB0aGUgZXJyb3Igc3RhdGUgdG8gYmUgdHVybmVkIG9mZiBhbmQgb24gYWdhaW5cbiAgICB9XG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgUmFkaW9JbnB1dENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQ29udHJvbFZhbHVlQWNjZXNzb3Ige1xuICBmb3JtR3JvdXBFbXB0eSA9IG5ldyBGb3JtR3JvdXAoe30pO1xuICBzaXplID0gRFNTaXplcy5sYXJnZTtcbiAgc2l6ZXMgPSBEU1NpemVzO1xuICB0b3VjaGVkID0gZmFsc2U7XG5cbiAgQElucHV0KCkgY29uZmlnOiBJUmFkaW9JbnB1dENvbXBvbmVudENvbmZpZyA9IHtcbiAgICBpZDogJycsXG4gICAgZm9ybUdyb3VwOiB0aGlzLmZvcm1Hcm91cEVtcHR5XG4gIH07XG4gIEBJbnB1dCgpIGlkID0gJyc7XG4gIEBJbnB1dCgpIGZvcm1Hcm91cCA9IHRoaXMuZm9ybUdyb3VwRW1wdHk7XG5cbiAgb25DaGFuZ2UgPSAoZm9ybVZhbHVlOiBzdHJpbmcpID0+IHsgfTtcbiAgb25Ub3VjaGVkID0gKCkgPT4geyB9O1xuICB3cml0ZVZhbHVlKGZvcm1WYWx1ZTogYW55KSB7XG4gICAgLy8gdGhpcy5mb3JtLmdldCgnZm9ybUNvbnRyb2wnKT8uc2V0VmFsdWUoZm9ybVZhbHVlKTtcbiAgfVxuICByZWdpc3Rlck9uQ2hhbmdlKG9uQ2hhbmdlOiBhbnkpIHtcbiAgICB0aGlzLm9uQ2hhbmdlID0gb25DaGFuZ2U7XG4gIH1cbiAgcmVnaXN0ZXJPblRvdWNoZWQob25Ub3VjaGVkOiBhbnkpIHtcbiAgICB0aGlzLm9uVG91Y2hlZCA9IG9uVG91Y2hlZDtcbiAgfVxuXG4gIG1hcmtBc1RvdWNoZWQoKSB7XG4gICAgaWYgKCF0aGlzLnRvdWNoZWQpIHtcbiAgICAgIHRoaXMub25Ub3VjaGVkKCk7XG4gICAgICB0aGlzLnRvdWNoZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIGlmICh0aGlzLmNvbmZpZz8uc21hbGwpIHRoaXMuc2l6ZSA9IERTU2l6ZXMuc21hbGw7XG4gICAgaWYgKHRoaXMuaWQgIT09ICcnKSB0aGlzLmNvbmZpZy5pZCA9IHRoaXMuaWQ7XG4gICAgaWYgKHRoaXMuZm9ybUdyb3VwICE9PSB0aGlzLmZvcm1Hcm91cEVtcHR5KSB0aGlzLmNvbmZpZy5mb3JtR3JvdXAgPSB0aGlzLmZvcm1Hcm91cDtcblxuICAgIHRoaXMuY29uZmlnLmZvcm1Hcm91cC5hZGRDb250cm9sKHRoaXMuY29uZmlnLmlkLCBuZXcgRm9ybUNvbnRyb2woJycsIHRoaXMuY29uZmlnLnZhbGlkYXRvcnMpKTtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0gb3ZlcnJpZGVcbiAgICogQHJldHVybnNcbiAgICovXG4gIGdldFNpemUob3ZlcnJpZGU6IERTU2l6ZXMgfCB1bmRlZmluZWQpIHtcbiAgICBpZiAob3ZlcnJpZGUpIHtcbiAgICAgIHJldHVybiBvdmVycmlkZTtcbiAgICB9XG4gICAgaWYgKHRoaXMuY29uZmlnPy5zbWFsbCkge1xuICAgICAgcmV0dXJuIERTU2l6ZXMuc21hbGw7XG4gICAgfVxuICAgIHJldHVybiBEU1NpemVzLmxhcmdlO1xuICB9XG5cbiAgLyoqXG4gICAqIHVzZWQgdG8gZGlzYWJsZSBpbmRpdmlkdWFsIGZpZWxkcyAoZnJvbSB0aGUgY29uZmlnIHVuZGVyICdvcHRpb25zJylcbiAgICogQHBhcmFtIGluZGV4IG9mIHRoZSBvcHRpb24gZmllbGQgdG8gYmUgZGlzYWJsZWRcbiAgICogQHJldHVybnMgbnVsbCBpZiB2YWx1ZSBpcyB1bmRlZmluZWQsIGVtcHR5IHN0cmluZyBvdGhlcndpc2UuIFRoaXMgd29ya3Mgd2l0aCBbYXR0ci5kaXNhYmxlZF0uXG4gICAqL1xuICBnZXREaXNhYmxlZChpbmRleDogbnVtYmVyKSB7XG4gICAgaWYgKHRoaXMuY29uZmlnLm9wdGlvbnMpIHtcbiAgICAgIGlmICh0aGlzLmNvbmZpZy5vcHRpb25zW2luZGV4XS5kaXNhYmxlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gJyc7XG4gIH1cbn1cbiIsIjxmb3JtIFtmb3JtR3JvdXBdPVwiY29uZmlnLmZvcm1Hcm91cFwiPlxuICAgIDxsYWJlbCAqbmdJZj1cImNvbmZpZy5sYWJlbFwiXG4gICAgICAgW2F0dHIuYXJpYS1sYWJlbF09XCJcbiAgICAgICAgICBjb25maWcuZm9ybUdyb3VwLmdldChjb25maWcuaWQpPy5pbnZhbGlkICYmIGNvbmZpZy5mb3JtR3JvdXAuZ2V0KGNvbmZpZy5pZCk/LmRpcnR5XG4gICAgICAgICAgPyAoY29uZmlnLmxhYmVsIHx8ICcnIHwgdHJhbnNsYXRlKSArICcgJyArXG4gICAgICAgICAgICAoY29uZmlnLmhlbHBUZXh0IHx8ICcnIHwgdHJhbnNsYXRlKSArICcgJyArICgnSU5QVVQuRVJST1InIHwgdHJhbnNsYXRlKSArICcgJyArXG4gICAgICAgICAgICAoY29uZmlnLmN1c3RvbUVycm9yVGV4dCB8fCAnJyB8IHRyYW5zbGF0ZSlcbiAgICAgICAgICA6IChjb25maWcubGFiZWwgfHwgJycgfCB0cmFuc2xhdGUpICsgJyAnICsgKGNvbmZpZz8uaGVscFRleHQgfHwgJycgfCB0cmFuc2xhdGUpXG4gICAgICAgXCJcbiAgICAgICBbZm9yXT1cImNvbmZpZy5pZFwiPnt7KGNvbmZpZy5sYWJlbCB8fCAnJykgfCB0cmFuc2xhdGV9fTwvbGFiZWw+XG4gICAgPGRpdiAqbmdGb3I9XCJsZXQgb3B0aW9uIG9mIGNvbmZpZy5vcHRpb25zOyBsZXQgaW5kZXggPSBpbmRleFwiIGNsYXNzPVwicmFkaW9cIj5cbiAgICAgICAgPG5nLWNvbnRhaW5lciBbbmdTd2l0Y2hdPVwiZ2V0U2l6ZShvcHRpb24uc2l6ZU92ZXJyaWRlKVwiPlxuICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdTd2l0Y2hDYXNlPVwic2l6ZXMuc21hbGxcIj5cbiAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiY29uZmlnLmVycm9yIHx8IG9wdGlvbi5lcnJvclwiPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhZGlvXCIgdmFsdWU9XCJ7e29wdGlvbi52YWx1ZSB8fCBvcHRpb24udGV4dH19XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICBbaWRdPVwiY29uZmlnLmlkICsgaW5kZXhcIiBzaXplPVwic21hbGxcIiBjbGFzcz1cIm5nLWludmFsaWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgIFtmb3JtQ29udHJvbE5hbWVdPVwiY29uZmlnLmlkID8/ICdmb3JtQ29udHJvbCdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgIFthdHRyLmRpc2FibGVkXT0nZ2V0RGlzYWJsZWQoaW5kZXgpJz5cbiAgICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiIWNvbmZpZy5lcnJvciAmJiAhb3B0aW9uLmVycm9yXCI+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFkaW9cIiB2YWx1ZT1cInt7b3B0aW9uLnZhbHVlIHx8IG9wdGlvbi50ZXh0fX1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgW2lkXT1cImNvbmZpZy5pZCArIGluZGV4XCIgc2l6ZT1cInNtYWxsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtmb3JtQ29udHJvbE5hbWVdPVwiY29uZmlnLmlkID8/ICdmb3JtQ29udHJvbCdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgW2F0dHIuZGlzYWJsZWRdPSdnZXREaXNhYmxlZChpbmRleCknPlxuICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG5cbiAgICAgICAgICAgIDwhLS0gVE9ETzogU2VlIGlmIHdlIGNhbiByZW1vdmUgdGhlIGVycm9yIHN0YXRlIGZyb20gaGVyZSwgc2luY2UgaXQgaXMgY29udHJvbGxlZCBieSB0aGUgZm9ybUNvbnRyb2wgLS0+XG4gICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ1N3aXRjaERlZmF1bHQ+XG4gICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImNvbmZpZy5lcnJvciB8fCBvcHRpb24uZXJyb3JcIj5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJyYWRpb1wiIHZhbHVlPVwie3tvcHRpb24udmFsdWUgfHwgb3B0aW9uLnRleHR9fVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBbaWRdPVwiY29uZmlnLmlkICsgaW5kZXhcIiBzaXplPVwibGFyZ2VcIiBjbGFzcz1cIm5nLWludmFsaWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgW2Zvcm1Db250cm9sTmFtZV09XCJjb25maWcuaWQgPz8gJ2Zvcm1Db250cm9sJ1wiXG4gICAgICAgICAgICAgICAgICAgICAgICBbYXR0ci5kaXNhYmxlZF09J2dldERpc2FibGVkKGluZGV4KSc+XG4gICAgICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cIiFjb25maWcuZXJyb3IgJiYgIW9wdGlvbi5lcnJvclwiPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhZGlvXCIgdmFsdWU9XCJ7e29wdGlvbi52YWx1ZSB8fCBvcHRpb24udGV4dH19XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtpZF09XCJjb25maWcuaWQgKyBpbmRleFwiIHNpemU9XCJsYXJnZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBbZm9ybUNvbnRyb2xOYW1lXT1cImNvbmZpZy5pZCA/PyAnZm9ybUNvbnRyb2wnXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIFthdHRyLmRpc2FibGVkXT0nZ2V0RGlzYWJsZWQoaW5kZXgpJz5cbiAgICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICA8L25nLWNvbnRhaW5lcj5cblxuICAgICAgICA8bGFiZWwgZm9yPVwie3tjb25maWcuaWR9fVwiPnt7b3B0aW9uLnRleHQgfCB0cmFuc2xhdGV9fTwvbGFiZWw+XG4gICAgPC9kaXY+XG48L2Zvcm0+XG4iXX0=