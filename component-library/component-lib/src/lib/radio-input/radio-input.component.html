<form [formGroup]="config.formGroup" [ngClass]="config.size" (click)="standAloneFunctions.wasTouched(config.formGroup, config.id)">
  <label *ngIf="config.label"
    [attr.aria-label]="
      config.formGroup.get(config.id)?.invalid && config.formGroup.get(config.id)?.dirty
      ? (config.label || '' | translate) + ' ' +
        (config.helpText || '' | translate) + ' ' +
        ('Error: ' + standAloneFunctions.getErrorAria(config.formGroup, config.id, (config.errorMessages || [])))
      : (config.label || '' | translate) + ' ' + (config.helpText || '' | translate)
    "
    [for]="config.id" class="radio-label">
    <i *ngIf="config?.required" class="fa-regular fa-asterisk required-star"></i> {{(config.label || '') | translate}}
  </label>
  <p *ngIf="config.desc" class="radio-desc">{{(config.desc || '') | translate}}</p>
  <p *ngIf="config.hint" class="radio-hint">{{(config.hint || '') | translate}}</p>
  <div class="radio-buttons">
    <div *ngFor="let option of config.options; let index = index" class="radio">
    <!-- TODO: See if we can remove the error state from here, since it is controlled by the formControl -->
      <input type="radio"
        value="{{option.value || option.text}}"
        id="{{config.id + index}}"
        [formControlName]="config.id ?? 'formControl'"
        [attr.disabled]='getDisabled(index)'
        [ngClass]="option?.sizeOverride ? option?.sizeOverride : config.size" >
      <label for="{{config.id + index}}"
        [ngClass]="option?.sizeOverride ? option?.sizeOverride + '_label' : config.size + '_label'"
        [attr.aria-label]="
          config.formGroup.get(config.id)?.invalid && config.formGroup.get(config.id)?.dirty
          ? (option.text || '' | translate) + ' ' +
            ('Error: ' + standAloneFunctions.getErrorAria(config.formGroup, config.id, (config.errorMessages || [])))
          : (option.text || '' | translate)
        "
      >{{(option.text || '') | translate}}</label>
    </div>
  </div>
  <ng-container *ngIf="(config.formGroup.get(config.id)?.touched) && config.formGroup.get(config.id)?.invalid">
    <ng-container *ngFor="let errors of errorIds; let i = index">
      <div *ngIf="config.formGroup.get(config.id)?.errors?.[errors.key]" class="radio-errors">
        <lib-error [id]="errors.id" [errorLOV]="errors.errorLOV" aria-live="polite"></lib-error>
      </div>
    </ng-container>
  </ng-container>
</form>
